# 06. HTTP와 HTTPS의 차이

웹 통신에서 가장 기본이 되는 프로토콜은 HTTP입니다. 하지만 보안이 중요해지면서 HTTP의 취약점을 보완한 HTTPS가 등장하여 현재는 대부분의 웹사이트에서 HTTPS를 사용하고 있습니다. 이 두 프로토콜의 근본적인 차이는 **보안성**에 있습니다.

## 1. HTTP (HyperText Transfer Protocol)

**HTTP**는 웹 서버와 클라이언트(웹 브라우저) 간에 데이터를 주고받는 데 사용되는 프로토콜입니다.

### 주요 특징
-   **평문 통신**: 데이터를 암호화하지 않고 **평문(Plaintext)** 상태로 전송합니다.
-   **보안 취약**: 데이터가 암호화되지 않으므로, 중간에 데이터를 가로채거나(스니핑), 위변조(변조)하는 공격에 취약합니다. 사용자 정보(ID, 비밀번호 등)가 노출될 위험이 큽니다.
-   **기본 포트**: 80번 포트를 사용합니다.
> 스니핑: 네트워크 상의 데이터를 몰래 엿듣거나 가로채는 행위.

> 위변조: 원본 데이터를 불법적으로 변경하거나 조작하는 행위.

### 활용 (실무 예시)
현재는 보안상의 이유로 HTTP 단독 사용은 권장되지 않지만, 다음과 같은 경우에 제한적으로 사용되거나 HTTPS로 전환되기 전 단계에서 활용될 수 있습니다.
-   **뉴스 기사 조회**: 공개된 정보로, 보안이 크게 중요하지 않은 경우.
-   **이미지/동영상 CDN 전송**: 이미 공개된 콘텐츠를 CDN을 통해 빠르게 전송할 때. (단, CDN 접근 자체는 HTTPS로 보호되는 경우가 많음)
  > CDN (콘텐츠 전송 네트워크): 사용자의 지리적 위치와 가까운 서버에서 콘텐츠를 제공하여 전송 속도를 높이는 분산 서버 네트워크.

## 2. HTTPS (HyperText Transfer Protocol Secure)

**HTTPS**는 HTTP에 **TLS/SSL** 프로토콜을 결합하여 보안을 강화한 버전입니다. HTTP의 모든 기능을 포함하면서 데이터의 기밀성, 무결성, 인증을 제공합니다.

### 주요 특징
-   **암호화 통신**: 모든 데이터를 **TLS/SSL** 프로토콜을 통해 암호화하여 전송합니다.
-   **데이터 무결성**: 전송되는 데이터가 중간에 위변조되지 않았음을 보장합니다.
-   **서버 인증**: <b>인증서(Certificate)</b>를 통해 통신하려는 서버의 신원을 확인할 수 있습니다. 이는 피싱(Phishing) 공격 등을 방지하는 데 도움을 줍니다.
-   **기본 포트**: 443번 포트를 사용합니다.
> 피싱: 신뢰할 수 있는 기관을 사칭하여 개인 정보를 빼내는 사기 수법.

### 동작 방식 (TLS Handshake 상세)
TLS Handshake는 클라이언트와 서버가 안전한 통신을 시작하기 위해 서로의 정보를 교환하고 암호화 키를 설정하는 과정입니다. 주요 단계는 다음과 같습니다.

1.  **ClientHello**: 클라이언트가 서버에 연결을 요청하며, 자신이 사용할 수 있는 TLS 버전, 암호화 방식(Cipher Suites), 압축 방식 등을 서버에 전달합니다.
2.  **ServerHello**: 서버는 클라이언트의 ClientHello 메시지를 받고, 그중에서 자신이 선택한 TLS 버전, 암호화 방식, 압축 방식 등을 클라이언트에 전달합니다. 또한, 서버의 공개키가 포함된 <b>인증서(Certificate)</b>를 클라이언트에 보냅니다.
3.  **인증서 검증**: 클라이언트는 서버로부터 받은 인증서가 유효한지(만료 여부, 신뢰할 수 있는 CA에 의해 발급되었는지 등) 검증합니다.
4.  **키 교환 (Key Exchange)**: 클라이언트는 서버 인증서의 공개키를 사용하여 대칭키를 암호화할 정보를 생성하고 서버에 전송합니다. 서버는 자신의 개인키로 이를 복호화하여 대칭키를 얻습니다. (또는 Diffie-Hellman 같은 키 교환 방식을 사용)
5.  **Finished 메시지**: 클라이언트와 서버는 지금까지의 Handshake 과정이 성공적으로 완료되었음을 알리는 Finished 메시지를 서로에게 암호화하여 전송합니다.
6.  **데이터 통신**: Handshake가 완료되면, 클라이언트와 서버는 합의된 대칭키를 사용하여 실제 HTTP 데이터를 암호화하여 주고받습니다.

### 활용 (실무 예시)
Https는 보안이 필수적인 모든 웹 통신에 사용됩니다.
-   **온라인 결제**: 신용카드 정보, 계좌 정보 등 민감한 금융 정보 전송.
-   **OAuth 인증**: 사용자 인증 및 권한 부여 과정에서 토큰 교환 등 보안이 중요한 데이터 전송.
-   **클라우드 API 호출**: 클라우드 서비스(AWS, Azure, GCP 등)의 API를 호출하여 데이터를 주고받을 때.
-   **로그인/회원가입**: 사용자 ID, 비밀번호 등 개인 정보 전송.
-   **개인 정보 조회/수정**: 마이페이지 등에서 개인 정보를 다룰 때.

## 3. HTTP vs HTTPS 비교

| 구분 | HTTP | HTTPS |
|---|---|---|
| 보안 | 취약 (평문 통신) | 강력 (암호화 통신) |
| 프로토콜 | HTTP | HTTP + TLS/SSL |
| 포트 | 80 | 443 |
| 데이터 | 평문 | 암호화 |
| 인증 | 없음 | 인증서 기반 서버 인증 |
| 무결성 | 보장 안 됨 | 보장 됨 |
| 비용 | 무료 | 인증서 발급 비용 발생 |

### 성능 측면 (Performance)
과거 HTTPS는 암호화/복호화 과정으로 인해 HTTP보다 성능 부담이 크다는 인식이 있었습니다. 하지만 현대 CPU의 발전과 TLS 프로토콜의 지속적인 최적화(예: TLS Session Resumption, OCSP Stapling 등) 덕분에, 현재는 HTTP와 HTTPS 간의 성능 차이가 거의 미미합니다. 따라서 성능 저하에 대한 우려 없이 보안 강화를 위해 HTTPS를 적극적으로 도입하는 것이 권장됩니다.
  > TLS Session Resumption: 이전에 연결했던 클라이언트와 서버가 TLS Handshake 과정을 단축하여 빠르게 재연결하는 기술.

  > OCSP Stapling: 서버가 클라이언트에게 자신의 인증서 유효성 정보를 미리 제공하여 클라이언트가 직접 CA에 문의하는 과정을 생략하게 하는 기술.

## 게임 개발 실무 (C++) 관점

게임 개발에서도 HTTP/HTTPS 통신은 매우 중요하게 활용됩니다. 특히 보안이 중요한 정보 교환에 필수적입니다.

-   **게임 클라이언트 웹 API 통신**:
    -   로그인, 회원가입, 계정 정보 조회, 아이템 구매, 결제 등 민감한 사용자 정보나 게임 데이터를 주고받을 때는 반드시 HTTPS를 사용해야 합니다.
    -   게임 내 공지사항, 이벤트 정보, 패치 노트 등 비교적 덜 민감한 정보는 HTTP를 사용할 수도 있지만, 보안 강화를 위해 HTTPS를 사용하는 것이 일반적입니다.
-   **게임 런처 및 업데이트 시스템**:
    -   게임 런처가 서버로부터 게임 파일 목록, 패치 파일 다운로드 경로 등을 받아올 때 HTTPS를 사용하여 데이터의 무결성과 신뢰성을 확보합니다. 악의적인 파일 변조를 방지할 수 있습니다.
    -   게임 클라이언트 자체 업데이트 시에도 HTTPS를 통해 안전하게 업데이트 파일을 다운로드합니다.
-   **C++에서의 HTTPS 통신**:
    -   C++ 환경에서 HTTPS 통신을 구현할 때는 `cURL` 라이브러리가 널리 사용됩니다. `cURL`은 다양한 프로토콜을 지원하며, HTTPS 통신을 위한 TLS/SSL 기능도 내장하고 있습니다.
    -   `boost::asio`와 `OpenSSL`을 함께 사용하여 HTTPS 클라이언트/서버를 직접 구현할 수도 있습니다. 이는 더 낮은 수준의 제어를 
    제공하지만, 구현 복잡도가 높습니다.
    -   게임 엔진(Unreal Engine, Unity)의 경우 자체적으로 HTTP/HTTPS 통신 모듈을 제공하여 개발자가 쉽게 사용할 수 있도록 합니다.
        > cURL: 다양한 프로토콜을 사용하여 데이터를 전송하는 명령줄 도구 및 라이브러리.

        > boost::asio: C++에서 네트워크 및 저수준 I/O 작업을 위한 크로스 플랫폼 라이브러리.
    
        > OpenSSL: TLS/SSL 프로토콜을 구현한 오픈 소스 암호화 라이브러리.
    

HTTPS는 게임의 보안을 강화하고 사용자 신뢰를 얻는 데 필수적인 요소입니다.

### 실무적 디버깅 포인트
HTTPS 통신 시 개발자들이 자주 겪는 문제들은 다음과 같습니다.
-   **인증서 만료**: 서버 인증서의 유효 기간이 지나면 클라이언트에서 보안 경고가 발생하거나 통신이 실패합니다.
-   **루트 인증서 불일치**: 클라이언트(운영체제 또는 브라우저)가 서버 인증서를 발급한 CA(인증 기관)의 루트 인증서를 신뢰하지 않을 때 발생합니다.
    > CA(인증 기관): 디지털 인증서를 발급하고 관리하여 신뢰성을 보장하는 기관.
-   **자체 서명 인증서**: 개발/테스트 환경에서 자체 서명 인증서를 사용하는 경우, 클라이언트에서 신뢰할 수 없는 인증서로 간주하여 경고를 표시하거나 통신을 차단할 수 있습니다.
-   **방화벽/프록시 문제**: 특정 네트워크 환경에서 방화벽이나 프록시 서버가 HTTPS 통신을 방해하거나 변조할 수 있습니다.