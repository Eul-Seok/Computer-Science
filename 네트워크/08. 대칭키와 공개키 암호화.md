# 08. 대칭키와 공개키 암호화

네트워크 통신에서 데이터의 기밀성(Confidentiality)과 무결성(Integrity)을 보장하기 위해 암호화 기술이 필수적으로 사용됩니다.
  > 기밀성: 인가된 사용자만 정보에 접근할 수 있도록 보장하는 보안 원칙.
  
  > 무결성: 정보가 전송되거나 저장되는 동안 변경되거나 손상되지 않았음을 보장하는 보안 원칙.

암호화 방식은 크게 **대칭키 암호화**와 **공개키 암호화** 두 가지로 나눌 수 있으며, 각각의 장단점과 활용 목적이 다릅니다.

## 1. 대칭키 암호화 (Symmetric-key Cryptography)

**대칭키 암호화**는 데이터를 암호화하고 복호화할 때 동일한 암호화 키를 사용하는 방식입니다.

### 주요 특징
-   **속도**: 암호화 및 복호화 연산 속도가 매우 빠릅니다.
-   **효율성**: 적은 연산량으로 대량의 데이터를 효율적으로 암호화할 수 있습니다.
-   **키 관리의 어려움**: 통신에 참여하는 모든 당사자가 동일한 비밀 키를 안전하게 공유해야 합니다. 키를 안전하게 전달하는 것이 가장 큰 과제입니다. 만약 키가 탈취되면 모든 암호화된 데이터가 노출됩니다.
-   **종류**: AES(Advanced Encryption Standard), DES(Data Encryption Standard) 등이 있습니다.
  > AES: 현재 가장 널리 사용되는 대칭키 암호화 알고리즘으로, 강력한 보안성과 빠른 처리 속도를 가집니다.

  > DES: 과거에 널리 사용되었던 대칭키 암호화 알고리즘으로, 현재는 보안 취약점으로 인해 AES로 대체되었습니다.

### 활용
주로 대량의 데이터를 빠르게 암호화해야 할 때 사용됩니다. 하지만 키 교환의 어려움 때문에 단독으로 사용되기보다는 공개키 암호화와 함께 사용되는 경우가 많습니다.

## 2. 공개키 암호화 (Public-key Cryptography)

**공개키 암호화**는 데이터를 암호화하고 복호화할 때 서로 다른 두 개의 키(공개키, 개인키)를 사용하는 방식입니다.

### 주요 특징
-   **키 관리의 용이성**: 공개키는 누구나 알 수 있도록 공개하고, 개인키는 사용자 본인만 안전하게 보관합니다. 공개키로 암호화된 데이터는 해당 개인키로만 복호화할 수 있습니다.
-   **보안성**: 키 전달의 안전성이 높습니다. 공개키가 노출되어도 개인키 없이는 복호화가 불가능합니다.
-   **속도**: 대칭키 암호화에 비해 암호화 및 복호화 연산 속도가 매우 느립니다. 대량의 데이터를 암호화하기에는 비효율적입니다.
-   **종류**: **RSA**, ECC(Elliptic Curve Cryptography) 등이 있습니다.
  > RSA: 가장 널리 사용되는 공개키 암호화 알고리즘 중 하나로, 큰 소수의 곱셈을 기반으로 합니다.

  > ECC: 타원 곡선 이론을 기반으로 하는 공개키 암호화 알고리즘으로, RSA보다 짧은 키 길이로도 높은 보안 강도를 제공합니다.

### 활용
공개키 암호화는 단순히 데이터를 암호화하는 것을 넘어, 다음과 같이 보안의 핵심적인 요소로 활용됩니다.
-   **키 교환**: 대칭키 암호화에 사용할 비밀 키를 안전하게 교환하는 데 사용됩니다. (예: TLS/SSL Handshake)
-   **디지털 서명 (Digital Signature)**: 메시지의 발신자 인증 및 메시지 위변조 방지(무결성)를 위해 사용됩니다. 발신자의 개인키로 서명하고, 수신자는 발신자의 공개키로 서명을 검증합니다.
-   **인증서 기반 신원 확인 (PKI - Public Key Infrastructure)**: 웹사이트 서버나 사용자의 신원을 공개키 기반 인증서(Certificate)를 통해 확인합니다. 이는 피싱(Phishing)과 같은 위협으로부터 사용자를 보호합니다。
-   **사용자 인증**: 로그인 시 사용자 신원을 확인하는 데 사용될 수 있습니다.

## 3. 실제 시스템에서의 혼합 사용 (TLS/SSL)

실제 네트워크 통신에서는 대칭키 암호화의 빠른 속도와 공개키 암호화의 안전한 키 교환이라는 장점을 결합하여 사용합니다. 대표적인 예가 **TLS(Transport Layer Security)** 프로토콜입니다.
  > TLS: 인터넷 통신을 암호화하고 인증하는 데 사용되는 보안 프로토콜로, SSL의 후속 기술입니다.

-   **초기 연결**: 공개키 암호화를 사용하여 통신에 사용할 대칭키를 안전하게 교환합니다.
-   **데이터 통신**: 교환된 대칭키를 사용하여 실제 데이터를 빠르게 암호화하고 복호화합니다.

이러한 하이브리드 방식은 보안성과 효율성을 동시에 만족시킵니다.

## 게임 개발 실무 (C++) 관점

게임 개발에서 암호화는 클라이언트와 서버 간의 통신 보안, 사용자 인증, 게임 데이터 보호 등 다양한 측면에서 중요하게 활용됩니다.

-   **클라이언트-서버 통신 보안**:
    -   로그인 정보, 결제 정보, 개인 정보 등 민감한 데이터는 반드시 암호화되어 전송되어야 합니다. HTTPS(TLS)를 사용하여 웹 기반 API 통신을 보호하거나, 게임 자체 프로토콜에 TLS/SSL을 적용하여 통신 채널을 암호화합니다.
    -   게임 패킷 변조 방지: 패킷에 디지털 서명을 추가하여 무결성을 검증하거나, 암호화를 통해 패킷 내용을 숨겨 해킹 시도를 어렵게 합니다.
-   **게임 데이터 보호**:
    -   게임 클라이언트 내의 설정 파일, 리소스 파일, 세이브 파일 등을 암호화하여 데이터 변조나 치트 행위를 방지합니다.
    -   게임 서버 간 통신: 마이크로서비스 아키텍처에서 서버 간 통신 시에도 암호화를 적용하여 내부 네트워크 보안을 강화합니다.
  > 마이크로서비스 아키텍처: 하나의 큰 애플리케이션을 작고 독립적인 서비스들의 집합으로 구성하는 소프트웨어 개발 방식

C++ 환경에서는 `OpenSSL` 라이브러리가 가장 널리 사용되는 암호화 툴킷입니다. `OpenSSL`은 대칭키(AES, DES), 공개키(RSA), 해시 함수(SHA, MD5) 등 다양한 암호화 기능을 제공하며, TLS/SSL 구현에도 사용됩니다.
  > SHA: 데이터의 무결성을 검증하는 데 사용되는 암호화 해시 함수 시리즈.

  > MD5: 과거에 널리 사용되었던 암호화 해시 함수로, 현재는 보안 취약점으로 인해 SHA 등으로 대체되었습니다.

게임 개발자는 `OpenSSL` API를 직접 사용하거나, `boost::asio`와 같은 네트워크 라이브러리가 `OpenSSL`을 통합하여 제공하는 기능을 활용하여 보안 통신을 구현할 수 있습니다.

예시: `OpenSSL`을 이용한 AES 암호화/복호화, RSA 키 쌍 생성 및 데이터 암호화/복호화, TLS 소켓 구현 등.