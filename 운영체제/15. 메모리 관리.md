# 15. 메모리 관리 (개요)

운영체제는 컴퓨터 시스템의 핵심 자원 중 하나인 메모리를 효율적으로 사용하고 관리하기 위한 다양한 기법을 제공합니다. 메모리 관리는 여러 프로세스가 한정된 물리 메모리를 공유하면서도 서로의 영역을 침범하지 않고 안정적으로 실행될 수 있도록 보장하며, 시스템의 전반적인 성능에 큰 영향을 미칩니다.

## 1. 메모리 관리의 필요성

*   **다중 프로그래밍 지원:** 여러 프로그램이 동시에 메모리에 적재되어 실행될 수 있도록 합니다.
*   **프로세스 보호:** 각 프로세스가 독립적인 메모리 공간을 사용하도록 하여, 한 프로세스의 오류가 다른 프로세스에 영향을 미치지 않도록 보호합니다.
*   **메모리 효율성 증대:** 한정된 물리 메모리를 최대한 효율적으로 사용하여 더 많은 프로세스를 실행하고, CPU 활용률을 높입니다.
*   **논리적 주소 공간 확장:** 실제 물리 메모리보다 큰 가상 주소 공간을 제공하여 프로그래머가 메모리 제약 없이 프로그램을 개발할 수 있도록 돕습니다.

## 2. 주요 메모리 관리 기법 및 개념

운영체제는 이러한 목표를 달성하기 위해 다음과 같은 주요 메모리 관리 기법들을 사용합니다.

### 2.1. 가상 메모리 (Virtual Memory)

가상 메모리는 실제 물리 메모리보다 훨씬 큰 논리적 주소 공간을 프로세스에게 제공하는 기술입니다. 운영체제는 필요한 부분만 물리 메모리에 적재하고 나머지는 디스크에 보관하는 방식으로 이를 구현하며, 요구 페이징(Demand Paging)과 페이지 폴트(Page Fault)는 가상 메모리를 지탱하는 핵심 동작 원리입니다.

*(상세한 내용은 '17. 가상 메모리와 페이지 폴트.md' 참조)*

### 2.2. 페이징 (Paging)

페이징은 프로세스의 논리 주소 공간을 고정된 크기의 '페이지'로, 물리 메모리를 동일한 크기의 '페이지 프레임'으로 나누어 관리하는 기법입니다. 이를 통해 메모리를 불연속적으로 할당하여 외부 단편화 문제를 해결합니다.

*(상세한 내용은 '16. 페이징과 세그먼테이션.md' 참조)*

### 2.3. 프레임 할당 (Frame Allocation)

운영체제는 다중 프로그래밍 환경에서 각 프로세스에 물리 메모리의 페이지 프레임을 할당하는 전략을 사용합니다. 대표적으로 모든 프로세스에 동일한 수를 할당하는 **균등 할당**과 프로세스 크기에 비례하여 할당하는 **비례 할당**이 있습니다.

### 2.4. 페이지 교체 알고리즘 (Page Replacement Algorithms)

가상 메모리 시스템에서 물리 메모리가 가득 찼을 때, 새로운 페이지를 로드하기 위해 어떤 기존 페이지를 디스크로 내보낼지(swap-out) 결정하는 알고리즘입니다. 페이지 폴트율을 최소화하는 것이 주된 목표입니다.

*(상세한 내용은 '18. 페이지 교체 알고리즘.md' 참조)*

### 2.5. 메모리 단편화 (Memory Fragmentation)

메모리 단편화는 메모리 공간이 작은 조각들로 나뉘어, 실제 사용 가능한 총량은 충분하지만 특정 크기의 요청을 만족시킬 수 없는 상태를 의미합니다.

*   **외부 단편화 (External Fragmentation):** 할당된 공간들 사이에 작은 빈 공간들이 생겨나는 현상입니다.
*   **내부 단편화 (Internal Fragmentation):** 요청한 크기보다 더 큰 메모리 블록을 할당할 때, 할당된 블록 내부에 사용되지 않고 남는 공간이 발생하는 현상입니다.

페이징은 외부 단편화를 해결하지만 내부 단편화를 유발할 수 있습니다.

### 2.6. 주소 변환과 TLB (Address Translation and TLB)

가상 주소를 물리 주소로 변환하는 과정의 성능을 높이기 위해, CPU는 <b>TLB(Translation Lookaside Buffer)</b>라는 고속 캐시를 사용합니다. TLB는 최근에 사용된 주소 변환 정보를 저장하여, 페이지 테이블을 매번 참조해야 하는 오버헤드를 줄여줍니다.

## 3. C++에서의 커스텀 메모리 관리

C++에서는 운영체제의 일반적인 메모리 관리자보다 더 효율적인 메모리 관리 전략을 직접 구현할 수 있는 여러 방법을 제공합니다.

*   **`operator new`/`delete` 오버라이딩:** 특정 클래스에 대한 메모리 할당/해제 방식을 재정의합니다.
*   **`std::allocator`:** 표준 컨테이너의 메모리 관리 방식을 변경하기 위한 커스텀 할당자를 제공합니다.
*   **`std::pmr` (Polymorphic Memory Resources, C++17):** 런타임에 다양한 메모리 할당 전략을 동적으로 교체할 수 있는 유연한 프레임워크입니다.

## 4. 게임 개발에서의 메모리 관리 최적화

게임은 대용량 데이터를 실시간으로 처리하므로, 운영체제의 메모리 관리 기법을 이해하고 게임 엔진에 최적화된 전략을 적용하는 것이 매우 중요합니다. 데이터 지역성을 고려하여 페이지 폴트를 최소화하고, 메모리 풀과 같은 커스텀 할당자를 사용하여 단편화와 할당 오버헤드를 줄이는 기법 등이 사용됩니다.

---
