# 파일 시스템

파일 시스템은 데이터를 **파일 단위로 저장하고 관리하는 운영체제의 핵심 구성 요소**입니다. 이는 사용자와 응용 프로그램이 물리적인 저장 장치(하드 디스크, SSD 등)의 복잡성을 직접 다루지 않고도 데이터를 쉽게 저장하고 검색하며 관리할 수 있도록 추상화된 인터페이스를 제공합니다.

## 1. 파일 시스템의 주요 역할

파일 시스템은 다음과 같은 중요한 역할을 수행합니다.

*   **데이터 저장 및 검색:** 데이터를 파일이라는 논리적 단위로 묶어 저장하고, 파일 이름이나 경로를 통해 쉽게 검색할 수 있도록 합니다.
*   **데이터 영속성:** 전원이 꺼져도 데이터가 손실되지 않고 유지되도록 합니다.
*   **데이터 구성 및 관리:** 디렉토리(폴더) 구조를 통해 파일을 계층적으로 조직하고 관리합니다.
*   **접근 제어 및 보안:** 파일 및 디렉토리에 대한 접근 권한을 설정하여 데이터의 무결성과 보안을 유지합니다.
*   **저장 공간 관리:** 디스크의 빈 공간을 효율적으로 할당하고 회수하여 저장 장치를 최적으로 활용합니다.
*   **메타데이터 관리:** 파일 이름, 크기, 생성/수정 시간, 소유자, 접근 권한 등 파일에 대한 부가 정보(메타데이터)를 관리합니다.

## 2. 파일 시스템의 구조

파일 시스템은 크게 논리적 구조와 물리적 구조로 나눌 수 있습니다.

### 2.1. 논리적 파일 시스템 구조

사용자 관점에서 파일과 디렉토리가 어떻게 조직되는지를 나타냅니다.

*   **파일 (File):** 이름, 타입, 크기, 위치, 보호, 시간/날짜/사용자 식별 정보 등의 속성을 가집니다.
*   **디렉토리 (Directory):** 파일들의 목록을 포함하며, 파일 시스템의 계층적 구조를 형성합니다.
    *   **단일 레벨 디렉토리:** 모든 파일이 하나의 디렉토리에 존재. (간단하지만 파일 이름 충돌 문제)
    *   **2단계 디렉토리:** 사용자별로 별도의 디렉토리를 가짐. (사용자 간 파일 이름 충돌 방지)
    *   **트리 구조 디렉토리:** 가장 일반적인 형태로, 디렉토리 안에 서브 디렉토리를 가질 수 있어 유연한 파일 관리가 가능합니다.

### 2.2. 물리적 파일 시스템 구조 (디스크 할당 방법)

파일이 디스크의 물리적 블록에 어떻게 저장되는지를 결정합니다.

*   **연속 할당 (Contiguous Allocation):** 파일을 디스크의 연속적인 블록에 저장합니다.
    *   **장점:** 빠른 순차 접근 및 직접 접근.
    *   **단점:** 외부 단편화 발생, 파일 크기 변경 어려움.
*   **연결 할당 (Linked Allocation):** 파일의 각 블록이 디스크의 어느 곳에든 저장될 수 있으며, 각 블록은 다음 블록의 주소를 포인터로 가리킵니다.
    *   **장점:** 외부 단편화 없음, 파일 크기 변경 용이.
    *   **단점:** 직접 접근 불가(순차 접근만 가능), 포인터 저장 공간 필요, 신뢰성 문제.
*   **색인 할당 (Indexed Allocation):** 파일의 모든 블록 주소를 **색인 블록(Index Block)**이라는 하나의 블록에 모아 저장합니다.
    *   **장점:** 직접 접근 가능, 외부 단편화 없음.
    *   **단점:** 색인 블록을 위한 추가 공간 필요, 작은 파일의 경우 비효율적.

## 3. 대표적인 파일 시스템

*   **FAT (File Allocation Table):** 초기 Windows 시스템에서 사용되던 간단한 파일 시스템. 구조가 단순하지만 대용량 디스크 및 파일 관리에 비효율적입니다.
*   **NTFS (New Technology File System):** Windows NT 이후 버전에서 사용되는 고급 파일 시스템. 보안 기능, 저널링, 대용량 파일/디스크 지원 등 FAT보다 훨씬 강력한 기능을 제공합니다.
*   **ext4 (Fourth Extended Filesystem):** Linux 시스템에서 가장 널리 사용되는 파일 시스템. 안정성, 성능, 확장성이 뛰어납니다.
*   **XFS:** 고성능 파일 시스템으로, 대용량 파일 및 파일 시스템에 최적화되어 있습니다.

## 4. 게임 개발에서의 파일 시스템 활용 및 최적화

게임 개발에서 파일 시스템은 게임 자원(에셋)의 로딩, 저장/불러오기, 패치 및 업데이트 등 핵심적인 부분에서 활용되며, 그 성능은 게임의 사용자 경험에 직접적인 영향을 미칩니다.

*   **에셋 로딩 시간:** 게임 시작 시 또는 레벨 전환 시 수많은 텍스처, 모델, 사운드 파일 등을 디스크에서 읽어와야 합니다. 파일 시스템의 읽기 성능은 로딩 시간에 결정적인 영향을 미치며, 이는 플레이어의 대기 시간을 줄이는 데 중요합니다.
*   **데이터 스트리밍:** 오픈 월드 게임이나 대규모 환경에서는 모든 에셋을 한 번에 메모리에 로드할 수 없습니다. 파일 시스템을 통해 필요한 에셋을 실시간으로 스트리밍(Streaming) 방식으로 로드하여 끊김 없는 게임 플레이를 제공합니다. 이때 파일 시스템의 순차 읽기 성능이 중요합니다.
*   **저장/불러오기:** 플레이어의 게임 진행 상황을 저장하고 불러오는 기능은 파일 시스템의 쓰기/읽기 성능에 의존합니다. 빠른 저장/불러오기 속도는 사용자 편의성을 높입니다.
*   **패치 및 업데이트:** 게임 패치나 업데이트 시에는 파일 시스템의 파일 생성, 삭제, 수정 작업이 대량으로 발생합니다. 효율적인 파일 시스템은 이러한 작업의 속도를 단축시킵니다.
*   **파일 압축 및 암호화:** 게임 에셋의 용량을 줄이고 무단 접근을 방지하기 위해 파일 시스템 수준 또는 애플리케이션 수준에서 압축 및 암호화를 적용하기도 합니다.
*   **가상 파일 시스템 (Virtual File System, VFS):** 많은 게임 엔진은 자체적인 가상 파일 시스템을 구현하여, 여러 개의 작은 에셋 파일을 하나의 큰 아카이브 파일(예: `.pak` 파일)로 묶어 관리합니다. 이는 파일 시스템의 오버헤드를 줄이고, 로딩 성능을 향상시키며, 파일 관리를 단순화하는 데 도움이 됩니다.

게임 개발자는 파일 시스템의 특성과 성능 병목 지점을 이해하고, 에셋 관리 전략(예: 에셋 번들링, 비동기 로딩, 데이터 지역성 고려)을 최적화하여 게임의 로딩 시간과 전반적인 성능을 향상시켜야 합니다.

---