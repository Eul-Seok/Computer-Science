# 시스템 콜 (System Call)

시스템 콜은 사용자 프로그램이 운영체제의 기능을 요청할 때 사용하는 **인터페이스 함수**입니다. 이는 사용자 모드에서 실행되는 프로그램이 하드웨어 자원에 직접 접근하거나 운영체제의 핵심 기능을 수행할 수 없기 때문에 필요합니다. 운영체제는 시스템의 안정성과 보안을 위해 하드웨어 접근 및 중요한 기능들을 <b>커널 모드(Kernel Mode)</b>에서만 허용합니다.

## 1. 시스템 콜의 필요성 및 동작 원리

사용자 프로그램이 파일 입출력, 프로세스 생성/종료, 메모리 할당 등 운영체제의 도움이 필요한 작업을 수행하려면, 시스템 콜을 호출하여 운영체제(커널)에게 해당 작업을 요청해야 합니다.

1.  **사용자 모드에서 시스템 콜 호출:** 프로그램이 시스템 콜을 호출하면, CPU는 현재 실행 모드를 사용자 모드에서 커널 모드로 전환합니다.
2.  **커널 모드 진입:** 운영체제는 시스템 콜 번호를 확인하고, 해당 시스템 콜에 맞는 커널 함수를 실행합니다.
3.  **작업 수행:** 커널은 요청받은 작업을 수행하며, 필요한 경우 하드웨어에 직접 접근하여 처리합니다.
4.  **결과 반환 및 모드 전환:** 작업이 완료되면, 커널은 결과를 사용자 프로그램에 반환하고 CPU는 다시 사용자 모드로 전환됩니다.

이러한 모드 전환 과정은 시스템의 보안과 안정성을 보장하는 핵심 메커니즘입니다.

## 2. 시스템 콜의 종류

시스템 콜은 기능에 따라 여러 범주로 나눌 수 있습니다.

*   **프로세스 제어:** `fork()` (새 프로세스 생성), `exec()` (프로세스 이미지 교체), `exit()` (프로세스 종료), `wait()` (자식 프로세스 종료 대기)
*   **파일 관리:** `open()` (파일 열기), `read()` (파일 읽기), `write()` (파일 쓰기), `close()` (파일 닫기), `delete()` (파일 삭제)
*   **장치 관리:** `ioctl()` (장치 제어), `read()` (장치에서 읽기), `write()` (장치에 쓰기)
*   **정보 유지:** `getpid()` (프로세스 ID 얻기), `time()` (현재 시간 얻기)
*   **통신:** `pipe()` (파이프 생성), `shmget()` (공유 메모리 생성), `socket()` (소켓 생성)

## 3. 시스템 콜과 API (Application Programming Interface)

일반적으로 프로그래머는 시스템 콜을 직접 호출하기보다는, 운영체제에서 제공하는 <b>API(Application Programming Interface)</b>를 통해 간접적으로 시스템 콜을 사용합니다. API는 시스템 콜을 감싸는 라이브러리 함수 형태로 제공되어 프로그래밍 편의성을 높여줍니다.

*   **API 함수:** `printf()`와 같은 C 표준 라이브러리 함수는 내부적으로 `write()`와 같은 하나 이상의 시스템 콜을 호출하여 화면에 데이터를 출력합니다.
*   **시스템 콜:** 운영체제 커널이 제공하는 저수준(low-level) 인터페이스입니다.

API는 시스템 콜의 복잡성을 추상화하고, 다양한 운영체제에서 일관된 프로그래밍 인터페이스를 제공하는 역할을 합니다.

## 4. 게임 개발에서의 시스템 콜 활용

게임 개발은 고성능과 실시간 반응성이 중요하기 때문에, 시스템 콜의 효율적인 사용은 게임의 성능에 직접적인 영향을 미칩니다.

*   **자원 로딩 및 관리:** 게임 시작 시 또는 새로운 레벨 로딩 시 `open()`, `read()`, `close()`와 같은 파일 관리 시스템 콜을 통해 텍스처, 모델, 사운드 등의 대용량 에셋을 디스크에서 메모리로 로드합니다. 게임 저장/불러오기 기능 또한 파일 관리 시스템 콜을 활용합니다.
*   **입력 처리:** 키보드, 마우스, 게임패드 등 사용자 입력 장치로부터 데이터를 읽어오는 과정에서 장치 관리 시스템 콜이 사용됩니다. 이는 플레이어의 조작을 실시간으로 게임에 반영하는 데 필수적입니다.
*   **네트워킹 (멀티플레이어 게임):** 멀티플레이어 게임에서는 `socket()`, `connect()`, `send()`, `recv()`와 같은 통신 시스템 콜을 사용하여 다른 플레이어나 게임 서버와 데이터를 주고받습니다. 네트워크 지연(latency)을 최소화하기 위해 시스템 콜 호출 횟수와 데이터 전송량을 최적화하는 것이 중요합니다.
*   **메모리 관리:** 게임 엔진은 `malloc()`이나 `new`와 같은 동적 메모리 할당 함수를 자주 사용하며, 이들은 내부적으로 운영체제의 메모리 관리 시스템 콜을 호출합니다. 대규모 게임 월드나 수많은 오브젝트를 효율적으로 관리하기 위해 가상 메모리 시스템 콜의 동작 방식을 이해하는 것이 중요합니다.
*   **시간 관리:** 게임 루프의 타이밍, 애니메이션 동기화, 물리 시뮬레이션 등은 `time()`과 같은 시간 관련 시스템 콜을 통해 현재 시간을 얻어와 처리합니다.

게임 개발자는 시스템 콜의 동작 방식과 그에 따른 오버헤드를 이해함으로써, 불필요한 시스템 콜 호출을 줄이고, 배치 처리(batch processing) 등을 통해 성능을 최적화하는 전략을 세울 수 있습니다.

## 5. 시스템 콜 오버헤드와 성능 최적화

- 시스템 콜은 사용자-커널 모드 전환이 포함되므로 비용이 크며, 이를 줄이기 위해 비동기 처리, 버퍼링, 캐싱 등이 활용됩니다.

---